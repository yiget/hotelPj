(function(c){var a=["DOMMouseScroll","mousewheel"];c.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var d=a.length;d;){this.addEventListener(a[--d],b,false)}}else{this.onmousewheel=b}},teardown:function(){if(this.removeEventListener){for(var d=a.length;d;){this.removeEventListener(a[--d],b,false)}}else{this.onmousewheel=null}}};c.fn.extend({mousewheel:function(d){return d?this.bind("mousewheel",d):this.trigger("mousewheel")},unmousewheel:function(d){return this.unbind("mousewheel",d)}});function b(f){var d=[].slice.call(arguments,1),g=0,e=true;f=c.event.fix(f||window.event);f.type="mousewheel";if(f.wheelDelta){g=f.wheelDelta/120}if(f.detail){g=-f.detail/3}d.unshift(f,g);return c.event.handle.apply(this,d)}})(jQuery);(function(){function _1(_2,_3){var _4=document.getElementsByTagName("head")[0];var _5=document.createElement("script");_5.type="text/javascript";_5.src=_2;_5.onload=_5.onreadystatechange=function(){if((!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){_3&&_3();_5.onload=_5.onreadystatechange=null;if(_4&&_5.parentNode){_4.removeChild(_5);}}};_4.insertBefore(_5,_4.firstChild);};function _6(_7,_8,_9){var _a="cbk_"+Math.round(Math.random()*10000);var _b="http://api.map.baidu.com/ag/coord/convert?from="+_8+"&to=4&x="+_7.lng+"&y="+_7.lat+"&callback=BMap.Convertor."+_a;_1(_b);BMap.Convertor[_a]=function(_c){delete BMap.Convertor[_a];var _d=new BMap.Point(_c.x,_c.y);_9&&_9(_d);};};window.BMap=window.BMap||{};BMap.Convertor={};BMap.Convertor.translate=_6;})();var YElementOverlayZIndex=11000;function YElementOverlay(_1,_2,_3,_4){this._point=_1;this._eId=_2;this._zIndex=YElementOverlayZIndex++;if(_3!=undefined){this._offsetTop=_3;}else{this._offsetTop=0;}if(_4!=undefined){this._offsetLeft=_4-30;}else{this._offsetLeft=0;}this._isShow=true;};YElementOverlay.prototype=new BMap.Overlay();YElementOverlay.prototype.initialize=function(_5){this._map=_5;var _6=document.getElementById(this._eId);_6.style.position="absolute";_6.style.zIndex=this._zIndex;_5.getPanes().markerPane.appendChild(_6);this._element=_6;return _6;};YElementOverlay.prototype.draw=function(){var _7=this._map.pointToOverlayPixel(this._point);this._element.style.left=_7.x-this._offsetLeft+"px";this._element.style.top=_7.y-this._offsetTop+"px";if(this._isShow){this.show();}else{this.hide();}};YElementOverlay.prototype.show=function(){if(this._element){this._element.style.display="";this._isShow=true;}};YElementOverlay.prototype.hide=function(){if(this._element){this._element.style.display="none";this._isShow=false;}};YElementOverlay.prototype.toggle=function(){if(this._element){if(this._element.style.display==""){this.hide();}else{this.show();}}};var BMapLib=window.BMapLib=BMapLib||{};(function(){var _1=0;var _2=BMapLib.SearchInRectangle=function(_3,_4,_5){if(!_3){return;}this._map=_3;this._searchWords=_4;this._opts={map:_3,followText:"",strokeWeight:2,strokeColor:"#111",style:"solid",fillColor:"#ccc",opacity:0.4,cursor:"crosshair",autoClose:true,autoViewport:false,alwaysShowOverlay:true,panel:"",selectFirstResult:"false",_zoomType:_1};this._setOptions(_5);this._opts.strokeWeight=this._opts.strokeWeight<=0?1:this._opts.strokeWeight;this._opts.opacity=this._opts.opacity<0?0:this._opts.opacity>1?1:this._opts.opacity;this._isOpen=false;this._fDiv=null;this._followTitle=null;this._overlay=null;this.local=this.localSearch(this);};_2.prototype._setOptions=function(_6){if(!_6){return;}if(_6.renderOptions){for(var p in _6.renderOptions){if(typeof(_6.renderOptions[p])!="undefined"){this._opts[p]=_6.renderOptions[p];}}}if(_6.onSearchComplete){this._opts["onSearchComplete"]=_6.onSearchComplete;}};_2.prototype.setStrokeColor=function(_7){if(typeof _7=="string"){this._opts.strokeColor=_7;this._updateStyle();}};_2.prototype.setLineStroke=function(_8){if(typeof _8=="number"&&Math.round(_8)>0){this._opts.strokeWeight=Math.round(_8);this._updateStyle();}};_2.prototype.setLineStyle=function(_9){if(_9=="solid"||_9=="dashed"){this._opts.style=_9;this._updateStyle();}};_2.prototype.setOpacity=function(_a){if(typeof _a=="number"&&_a>=0&&_a<=1){this._opts.opacity=_a;this._updateStyle();}};_2.prototype.setFillColor=function(_b){this._opts.fillColor=_b;this._updateStyle();};_2.prototype.setCursor=function(_c){this._opts.cursor=_c;_d.setCursor(this._opts.cursor);};_2.prototype._updateStyle=function(){if(this._fDiv){this._fDiv.style.border=[this._opts.strokeWeight,"px ",this._opts.style," ",this._opts.color].join("");var st=this._fDiv.style,op=this._opts.opacity;st.opacity=op;st.MozOpacity=op;st.KhtmlOpacity=op;st.filter="alpha(opacity="+(op*100)+")";}};_2.prototype.getCursor=function(){return this._opts.cursor;};_2.prototype._bind=function(){this.setCursor(this._opts.cursor);var me=this;_e(this._map.getContainer(),"mousemove",function(e){if(!me._isOpen){return;}if(!me._followTitle){return;}e=window.event||e;var t=e.target||e.srcElement;if(t!=_d.getDom(me._map)){me._followTitle.hide();return;}if(!me._mapMoving){me._followTitle.show();}var pt=_d.getDrawPoint(e,true);me._followTitle.setPosition(pt);});if(this._opts.followText){var t=this._followTitle=new BMap.Label(this._opts.followText,{offset:new BMap.Size(14,16),enableMassClear:false});this._followTitle.setStyles({color:"#333",borderColor:"#ff0103"});}};_2.prototype.open=function(){if(this._isOpen==true){return true;}if(!!BMapLib._toolInUse){return;}BMapLib._toolInUse=true;this._isOpen=true;if(!this.binded){this._bind();this.binded=true;}if(this._followTitle){this._map.addOverlay(this._followTitle);this._followTitle.hide();}var me=this;var _f=this._map;var _10=0;if(/msie (\d+\.\d)/i.test(navigator.userAgent)){_10=document.documentMode||+RegExp["$1"];}var _11=0;var _12=function(e){e=window.event||e;if(e.button!=0&&!_10||_10&&e.button!=1){return;}if(!!_10&&_d.getDom(_f).setCapture){_d.getDom(_f).setCapture();}if(!me._isOpen){return;}_11=0;me._bind.isZooming=true;_e(document,"mousemove",_13);_e(document,"mouseup",_14);me._bind.mx=e.layerX||e.offsetX||0;me._bind.my=e.layerY||e.offsetY||0;me._bind.ix=e.pageX||e.clientX||0;me._bind.iy=e.pageY||e.clientY||0;_26(_d.getDom(_f),"beforeBegin",me._generateHTML());me._fDiv=_d.getDom(_f).previousSibling;me._fDiv.style.width="0";me._fDiv.style.height="0";me._fDiv.style.left=me._bind.mx+"px";me._fDiv.style.top=me._bind.my+"px";_23(e);return _24(e);};var _13=function(e){if(me._isOpen==true&&me._bind.isZooming==true){if(me._overlay){me._map.removeOverlay(me._overlay);}var e=window.event||e;var _15=e.pageX||e.clientX||0;var _16=e.pageY||e.clientY||0;var dx=me._bind.dx=_15-me._bind.ix;var dy=me._bind.dy=_16-me._bind.iy;var tw=Math.abs(dx)-me._opts.strokeWeight;var th=Math.abs(dy)-me._opts.strokeWeight;me._fDiv.style.width=(tw<0?0:tw)+"px";me._fDiv.style.height=(th<0?0:th)+"px";_11=tw;var _17=[_f.getSize().width,_f.getSize().height];if(dx>=0){me._fDiv.style.right="auto";me._fDiv.style.left=me._bind.mx+"px";if(me._bind.mx+dx>=_17[0]-2*me._opts.strokeWeight){me._fDiv.style.width=_17[0]-me._bind.mx-2*me._opts.strokeWeight+"px";me._followTitle&&me._followTitle.hide();}}else{me._fDiv.style.left="auto";me._fDiv.style.right=_17[0]-me._bind.mx+"px";if(me._bind.mx+dx<=2*me._opts.strokeWeight){me._fDiv.style.width=me._bind.mx-2*me._opts.strokeWeight+"px";me._followTitle&&me._followTitle.hide();}}if(dy>=0){me._fDiv.style.bottom="auto";me._fDiv.style.top=me._bind.my+"px";if(me._bind.my+dy>=_17[1]-2*me._opts.strokeWeight){me._fDiv.style.height=_17[1]-me._bind.my-2*me._opts.strokeWeight+"px";me._followTitle&&me._followTitle.hide();}}else{me._fDiv.style.top="auto";me._fDiv.style.bottom=_17[1]-me._bind.my+"px";if(me._bind.my+dy<=2*me._opts.strokeWeight){me._fDiv.style.height=me._bind.my-2*me._opts.strokeWeight+"px";me._followTitle&&me._followTitle.hide();}}_23(e);return _24(e);}};var _14=function(e){if(!_11){me._fDiv.parentNode.removeChild(me._fDiv);}if(me._isOpen==true){_32(document,"mousemove",_13);_32(document,"mouseup",_14);if(!_11){return;}if(!!_10&&_d.getDom(_f).releaseCapture){_d.getDom(_f).releaseCapture();}var _18=parseInt(me._fDiv.style.left)+parseInt(me._fDiv.style.width)/2;var _19=parseInt(me._fDiv.style.top)+parseInt(me._fDiv.style.height)/2;var _1a=[_f.getSize().width,_f.getSize().height];if(isNaN(_18)){_18=_1a[0]-parseInt(me._fDiv.style.right)-parseInt(me._fDiv.style.width)/2;}if(isNaN(_19)){_19=_1a[1]-parseInt(me._fDiv.style.bottom)-parseInt(me._fDiv.style.height)/2;}var _1b=Math.min(_1a[0]/Math.abs(me._bind.dx),_1a[1]/Math.abs(me._bind.dy));_1b=Math.floor(_1b);var px1=new BMap.Pixel(_18-parseInt(me._fDiv.style.width)/2,_19+parseInt(me._fDiv.style.height)/2);var px2=new BMap.Pixel(_18+parseInt(me._fDiv.style.width)/2,_19-parseInt(me._fDiv.style.height)/2);var pt1=_f.pixelToPoint(px1);var pt2=_f.pixelToPoint(px2);var bds=new BMap.Bounds(pt1,pt2);delete me._bind.dx;delete me._bind.dy;delete me._bind.ix;delete me._bind.iy;if(!isNaN(_1b)){if(me._opts._zoomType==_1){targetZoomLv=Math.round(_f.getZoom()+(Math.log(_1b)/Math.log(2)));if(targetZoomLv<_f.getZoom()){targetZoomLv=_f.getZoom();}}}else{targetZoomLv=_f.getZoom()+(me._opts._zoomType==_1?1:-1);}var _1c=_f.pixelToPoint({x:_18,y:_19},_f.getZoom());if(me._opts.autoViewport){_f.centerAndZoom(_1c,targetZoomLv);}var pt=_d.getDrawPoint(e);if(me._followTitle){me._followTitle.setPosition(pt);me._followTitle.show();}me._bind.isZooming=false;me._fDiv.parentNode.removeChild(me._fDiv);me._fDiv=null;}var _1d=bds.getSouthWest(),_1e=bds.getNorthEast(),_1f=new BMap.Point(_1e.lng,_1d.lat),_20=new BMap.Point(_1d.lng,_1e.lat),_21=new BMap.Polygon([_1d,_20,_1e,_1f]);_21.setStrokeWeight(me._opts.strokeWeight);_21.setStrokeOpacity(me._opts.opacity);_21.setFillOpacity(me._opts.opacity);_21.setStrokeColor(me._opts.strokeColor);_21.setStrokeStyle(me._opts.style);_21.setFillColor(me._opts.fillColor);me._overlay=_21;_f.addOverlay(_21);me.local.searchInBounds(bds);if(!me._opts.alwaysShowOverlay){new _39({duration:240,fps:20,delay:500,render:function(t){var _22=0.3*(1-t);_21.setStrokeOpacity(_22);},finish:function(){_f.removeOverlay(me._overlay);_21.dispose();me._overlay=null;}});}if(me._opts.autoClose){setTimeout(function(){if(me._isOpen==true){me.close();}},70);}_23(e);return _24(e);};_d.show(this._map);this.setCursor(this._opts.cursor);if(!this._isBeginDrawBinded){_e(_d.getDom(this._map),"mousedown",_12);this._isBeginDrawBinded=true;}return true;};_2.prototype.close=function(){if(!this._isOpen){return;}this._isOpen=false;BMapLib._toolInUse=false;this._followTitle&&this._followTitle.hide();_d.hide();};_2.prototype.setKeyword=function(_25){this._searchWords=_25;};_2.prototype._generateHTML=function(){return["<div style='position:absolute;z-index:300;border:",this._opts.strokeWeight,"px ",this._opts.style," ",this._opts.strokeColor,"; opacity:",this._opts.opacity,"; background: ",this._opts.fillColor,"; filter:alpha(opacity=",Math.round(this._opts.opacity*100),"); width:0; height:0; font-size:0'></div>"].join("");};_2.prototype.localSearch=function(me){return{searchInBounds:function(bds){if(me._opts["onSearchComplete"]){me._opts["onSearchComplete"](bds);}}};};function _26(_27,_28,_29){var _2a,_2b;if(_27.insertAdjacentHTML){_27.insertAdjacentHTML(_28,_29);}else{_2a=_27.ownerDocument.createRange();_28=_28.toUpperCase();if(_28=="AFTERBEGIN"||_28=="BEFOREEND"){_2a.selectNodeContents(_27);_2a.collapse(_28=="AFTERBEGIN");}else{_2b=_28=="BEFOREBEGIN";_2a[_2b?"setStartBefore":"setEndAfter"](_27);_2a.collapse(_2b);}_2a.insertNode(_2a.createContextualFragment(_29));}return _27;};function _2c(_2d,_2e){_26(_2d,"beforeEnd",_2e);return _2d.lastChild;};function _23(e){var e=window.event||e;e.stopPropagation?e.stopPropagation():e.cancelBubble=true;};function _24(e){var e=window.event||e;e.preventDefault?e.preventDefault():e.returnValue=false;return false;};function _e(_2f,_30,_31){if(!_2f){return;}_30=_30.replace(/^on/i,"").toLowerCase();if(_2f.addEventListener){_2f.addEventListener(_30,_31,false);}else{if(_2f.attachEvent){_2f.attachEvent("on"+_30,_31);}}};function _32(_33,_34,_35){if(!_33){return;}_34=_34.replace(/^on/i,"").toLowerCase();if(_33.removeEventListener){_33.removeEventListener(_34,_35,false);}else{if(_33.detachEvent){_33.detachEvent("on"+_34,_35);}}};var _d={_map:null,_html:"<div style='background:transparent url(http://api.map.baidu.com/images/blank.gif);position:absolute;left:0;top:0;width:100%;height:100%;z-index:1000' unselectable='on'></div>",_maskElement:null,_cursor:"default",_inUse:false,show:function(map){if(!this._map){this._map=map;}this._inUse=true;if(!this._maskElement){this._createMask(map);}this._maskElement.style.display="block";},_createMask:function(map){this._map=map;if(!this._map){return;}var _36=this._maskElement=_2c(this._map.getContainer(),this._html);var _37=function(e){_23(e);return _24(e);};_e(_36,"mouseup",function(e){if(e.button==2){_37(e);}});_e(_36,"contextmenu",_37);_36.style.display="none";},getDrawPoint:function(e,n){e=window.event||e;var x=e.layerX||e.offsetX||0;var y=e.layerY||e.offsetY||0;var t=e.target||e.srcElement;if(t!=_d.getDom(this._map)&&n==true){while(t&&t!=this._map.getContainer()){if(!(t.clientWidth==0&&t.clientHeight==0&&t.offsetParent&&t.offsetParent.nodeName.toLowerCase()=="td")){x+=t.offsetLeft;y+=t.offsetTop;}t=t.offsetParent;}}if(t!=_d.getDom(this._map)&&t!=this._map.getContainer()){return;}if(typeof x==="undefined"||typeof y==="undefined"){return;}if(isNaN(x)||isNaN(y)){return;}return this._map.pixelToPoint(new BMap.Pixel(x,y));},hide:function(){if(!this._map){return;}this._inUse=false;if(this._maskElement){this._maskElement.style.display="none";}},getDom:function(map){if(!this._maskElement){this._createMask(map);}return this._maskElement;},setCursor:function(_38){this._cursor=_38||"default";if(this._maskElement){this._maskElement.style.cursor=this._cursor;}}};function _39(_3a){var _3b={duration:1000,fps:30,delay:0,transition:_3c.linear,onStop:function(){}};if(_3a){for(var i in _3a){_3b[i]=_3a[i];}}this._opts=_3b;if(_3b.delay){var me=this;setTimeout(function(){me._beginTime=new Date().getTime();me._endTime=me._beginTime+me._opts.duration;me._launch();},_3b.delay);}else{this._beginTime=new Date().getTime();this._endTime=this._beginTime+this._opts.duration;this._launch();}};_39.prototype._launch=function(){var me=this;var now=new Date().getTime();if(now>=me._endTime){if(typeof me._opts.render=="function"){me._opts.render(me._opts.transition(1));}if(typeof me._opts.finish=="function"){me._opts.finish();}return;}me.schedule=me._opts.transition((now-me._beginTime)/me._opts.duration);if(typeof me._opts.render=="function"){me._opts.render(me.schedule);}if(!me.terminative){me._timer=setTimeout(function(){me._launch();},1000/me._opts.fps);}};var _3c={linear:function(t){return t;},reverse:function(t){return 1-t;},easeInQuad:function(t){return t*t;},easeInCubic:function(t){return Math.pow(t,3);},easeOutQuad:function(t){return-(t*(t-2));},easeOutCubic:function(t){return Math.pow((t-1),3)+1;},easeInOutQuad:function(t){if(t<0.5){return t*t*2;}else{return-2*(t-2)*t-1;}return;},easeInOutCubic:function(t){if(t<0.5){return Math.pow(t,3)*4;}else{return Math.pow(t-1,3)*4+1;}},easeInOutSine:function(t){return(1-Math.cos(Math.PI*t))/2;}};})();(function($){$.fn.extend({mapHotelMarker:function(_1,_2,_3){if(_1){var _4=new Array();var _5=new Array();for(i=0;i<_1.length;i++){if(_1[i].lng==undefined||_1[i].lat==undefined){continue;}_4.push(new BMap.Point(_1[i].lng,_1[i].lat));_5.push(_1[i]);}_3=$.extend({},$.MapHotelMarker.defaults,{points:_4,hotelMarkers:_5,placeName:_2},_3);}return this.each(function(){new $.MapHotelMarker(this,_3);});},panTo:function(_6,_7){return this.trigger("panTo",[_6,_7]);},panToAnimation:function(_8,_9,_a){return this.trigger("panToAnimation",[_8,_9,_a]);},search:function(_b){this.trigger("search",_b);},close:function(){this.trigger("close");},lazyClose:function(){this.trigger("lazyClose");},destroy:function(){this.trigger("destroy");},repaint:function(_c,_d){this.trigger("repaint",[_c,_d]);},showTip:function(_e){this.trigger("showTipWithIndex",_e);},setCenter:function(_f,lat){return this.trigger("setCenter",[_f,lat]);}});$.MapHotelMarker=function(_10,_11){var _12=null;var _13=null;var _14=null;var _15=true;var _16=$(_10);var id=_10.id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");var map=new BMap.Map(_16.attr("id"));if(_11.enableScrollWheelZoom!=null){_15=_11.enableScrollWheelZoom;}if(_15){map.enableScrollWheelZoom();}if(_11.DragAndFindControl){var _17=new BMapLib.SearchInRectangle(map,null,{renderOptions:{map:map,strokeWeight:1,strokeColor:"black",style:"dashed",fillColor:"white",opacity:0.5,followText:"拖拽鼠标搜索",autoClose:true,autoViewport:false,alwaysShowOverlay:false},onSearchComplete:_11["onSearchComplete"]});var _18=function(e){_17.open();};var _19=function(e){_17.close();};var _1a=new DragFindControl(map,_18,_19);map.addControl(_1a);}map.addControl(new BMap.NavigationControl());map.addControl(new BMap.ScaleControl());if(_11.points!=null&&_11.points.length>0){for(index=0;index<_11.points.length;index++){var _1b=_11.points[index];if(_1b.lng==0&&_1b.lat==0){continue;}var _1c=id+"hotelRateMarker"+(parseInt(index)+1);var seq=(parseInt(index)+1);var _1d="";if(seq>99){_1d="class='sws'";}$("<div class='mpt' id='"+_1c+"' index='"+index+"'><a target='"+_11.target+"' href='"+_11.hotelMarkers[index].hotelUrl+"'><div class='mpt1 '><span seq "+_1d+">"+seq+"</span><p>￥"+_11.hotelMarkers[index].lowPrice+"</p></div><div class='sjdot'>&nbsp;</div></a></div>").mouseover(function(){_12=$(this).attr("id");this.style.zIndex=YElementOverlayZIndex++;clearTimeout(_13);_14=this;_13=setTimeout(_1e,200);}).mouseout(function(){_13=setTimeout(_1f,200);}).appendTo("body");map.addOverlay(new YElementOverlay(_1b,_1c,23));}if(_11.zoom!=null&&_11.zoom!=undefined){map.centerAndZoom(_11.points[0],_11.zoom);}else{map.setViewport(_11.points);var _20=map.getZoom();if(_20>17){map.zoomTo(17);}}}else{map.centerAndZoom(_11.placeName);}$("<div class='mpts' id='"+id+"BM-tip' style='display:none'><div class='mpts-inner'><div class='hts1 '><h3><a href='#' hotelName='true' target='"+_11.target+"'></a></h3><span lowPrice='true'>￥1888</span></div><div class='hts2 '><div class='hpic'><a href='#' hotelUrl='true' target='"+_11.target+"'><img imgUrl='true'></a></div><div class='hinfo'><table width='100%' border='0' cellspacing='0' cellpadding='0'><tr><td width='20%' valign='top'><span>类型:</span></td><td width='80%' valign='top' hotelType='true'></td></tr><tr><td valign='top'><span>地址:</span></td><td valign='top' hotelAddress='true'></td></tr></table></div></div><div class='hts3 '><div>满意度：<span satisficing='true'>99.5</span></div><div>有房指数：<span hasRoomIndex='true'>9.5</span></div><a href='#' hotelUrl='true' target='"+_11.target+"'>查看详情</a></div></div>").mouseover(function(){clearTimeout(_13);}).mouseout(function(){_13=setTimeout(_1f,200);}).appendTo("body");_16.bind("panTo",function(){map.setZoom(17);map.panTo(new BMap.Point(arguments[1],arguments[2]));for(i=0;i<_11.points.length;i++){if(_11.points[i].lng==arguments[1]&&_11.points[i].lat==arguments[2]){var _21=id+"hotelRateMarker"+(i+1);$("#"+_21).mouseover();break;}}});_16.bind("panToAnimation ",function(){map.panTo(new BMap.Point(arguments[1],arguments[2]));var _22=id+"hotelRateMarker"+(parseInt(arguments[3])+1);var obj=document.getElementById(_22);obj.style.zIndex=YElementOverlayZIndex++;clearTimeout(_13);_14=obj;_13=setTimeout(_1e,200);});_16.bind("setCenter",function(){map.setCenter(new BMap.Point(arguments[1],arguments[2]));});_16.bind("search",function(){var _23=new BMap.LocalSearch(_11.placeName,{pageCapacity:1,onMarkersSet:function(){map.setZoom(15);},renderOptions:{map:map}});_23.search(arguments[1]);});_16.bind("close",function(){$("#"+id+"BM-tip").hide();});_16.bind("lazyClose",function(){_13=setTimeout(_1f,500);});_16.bind("destroy",function(){for(index=0;index<_11.points.length;index++){var _24=_11.points[index];if(_24.lng==0&&_24.lat==0){continue;}var _25=id+"hotelRateMarker"+(parseInt(index)+1);$("div").remove("#"+_25);}$("div").remove("#"+id+"BM-tip");});_16.bind("showTipWithIndex",function(_26){_27(arguments[1]);});_16.bind("repaint",function(){_16.trigger("close");for(index=0;index<_11.points.length;index++){var _28=_11.points[index];if(_28.lng==0&&_28.lat==0){continue;}var _29=id+"hotelRateMarker"+(parseInt(index)+1);$("div").remove("#"+_29);}keywordsGeo=arguments[2];translateCallback=function(_2a){$("#keywordsOverlay").remove();$("<div id=\"keywordsOverlay\" style=\"position: absolute; background-color: rgb(238, 93, 91); border: 1px solid rgb(188, 59, 58); color: white; height: 18px; padding: 2px; line-height: 18px; white-space: nowrap; -moz-user-select: none; font-size: 12px;\"><span>"+keywordsGeo.keywords+"</span><div style=\"background: url(&quot;/images/bmap/label.png&quot;) no-repeat scroll 0% 0% transparent; position: absolute; width: 11px; height: 10px; top: 22px; left: 10px; overflow: hidden;\"></div></div>").mouseover(function(){this.style.zIndex=YElementOverlayZIndex++;}).appendTo("body");map.addOverlay(new YElementOverlay(_2a,"keywordsOverlay",30,10));};hotelMarkers=arguments[1];if(hotelMarkers){var _2b=new Array();var _2c=new Array();for(i=0;i<hotelMarkers.length;i++){if(hotelMarkers[i].lng==undefined||hotelMarkers[i].lat==undefined){continue;}_2b.push(new BMap.Point(hotelMarkers[i].lng,hotelMarkers[i].lat));_2c.push(hotelMarkers[i]);}_11=$.extend({},$.MapHotelMarker.defaults,_11,{points:_2b,hotelMarkers:_2c});if(_11.points!=null&&_11.points.length>0){for(index=0;index<_11.points.length;index++){var _28=_11.points[index];if(_28.lng==0&&_28.lat==0){continue;}var _29=id+"hotelRateMarker"+(parseInt(index)+1);var seq=(parseInt(index)+1);var _2d="";if(seq>99){_2d="class='sws'";}$("<div class='mpt' id='"+_29+"' index='"+index+"'><a target='"+_11.target+"' href='"+_11.hotelMarkers[index].hotelUrl+"'><div class='mpt1 '><span seq "+_2d+">"+seq+"</span><p>￥"+_11.hotelMarkers[index].lowPrice+"</p></div><div class='sjdot'>&nbsp;</div></a></div>").mouseover(function(){_12=$(this).attr("id");this.style.zIndex=YElementOverlayZIndex++;clearTimeout(_13);_14=this;_13=setTimeout(_1e,200);}).mouseout(function(){_13=setTimeout(_1f,200);}).appendTo("body");map.addOverlay(new YElementOverlay(_28,_29,23));var obj=$("#"+_29);if(keywordsGeo!=null&&_2c!=null&&_2c[index].hotelName.indexOf(keywordsGeo.keywords)!=-1){}else{if(keywordsGeo){var _2e=new BMap.Point(keywordsGeo.lng,keywordsGeo.lat);var pid=$j("#pid").val();if(pid.indexOf("1-01-34")==-1){translateCallback(_2e);}else{BMap.Convertor.translate(_2e,2,translateCallback);}}}}if(_11.zoom!=null&&_11.zoom!=undefined){map.centerAndZoom(_11.points[0],_11.zoom);}else{map.setViewport(_11.points);var _2f=map.getZoom();if(_2f>17){map.zoomTo(17);}}}}});function _1e(){var obj=_14;var _30=parseInt($(obj).attr("index"));_27(_30,false);};var _31=null;function _27(_32,_33){var _34=id+"hotelRateMarker"+(parseInt(_32)+1);var obj=$("#"+_34);if(_11.points!=null&&_11.points.length>0){for(i=0;i<_11.points.length;i++){var _35=_11.points[i];if(_35.lng==0&&_35.lat==0){continue;}var _36=id+"hotelRateMarker"+(parseInt(i)+1);$("#"+_36).removeClass("mptcurrent").addClass("mpt");}}var _35=_11.points[_32];obj.removeClass("mpt");obj.addClass("mptcurrent");if(_33!=false){clearTimeout(_13);}_14=obj.get();obj.css("zIndex",YElementOverlayZIndex++);var _37=_11.hotelMarkers[_32];var tip=document.getElementById(id+"BM-tip");if(tip!=undefined){var _38=$("#"+id+"BM-tip");_38.find("a[hotelName='true']").attr("href",_37.hotelUrl).html(_37.hotelName);_38.find("a[hotelUrl='true']").attr("href",_37.hotelUrl);_38.find("span[lowPrice='true']").html("￥"+_37.lowPrice);_38.find("td[hotelType='true']").html(_37.hotelType);_38.find("td[hotelAddress='true']").html(_37.address);_38.find("span[satisficing='true']").html(_37.satisficing+"%");_38.find("span[hasRoomIndex='true']").html(_37.hasRoomIndex);_38.find("img[imgUrl='true']").attr("src",_37.imgUrl);tip.style.zIndex=YElementOverlayZIndex++;_31=new YElementOverlay(_35,id+"BM-tip",-0,263);map.addOverlay(_31);}};function _1f(){$(_14).removeClass("mptcurrent");$(_14).addClass("mpt");var tip=document.getElementById(id+"BM-tip");if(tip!=undefined){_31.hide();}};};})(jQuery);function DragFindControl(_1,_2,_3){this.clickFn1=_2;this.clickFn2=_3;this.map=_1;this.defaultAnchor=BMAP_ANCHOR_TOP_RIGHT;this.defaultOffset=new BMap.Size(10,10);};DragFindControl.prototype=new BMap.Control();DragFindControl.prototype.initialize=function(_4){var _5=document.createElement("div");_5.appendChild(document.createTextNode("拉框找驿站"));_5.style.cursor="pointer";_5.style.color="#fff";_5.style.width="81px";_5.style.height="32px";_5.style.padding="0 0 0 31px";_5.style.backgroundImage="url(/images/bmap/map-lk.png)";_5.style.backgroundRepeat="no-repeat";_5.style.lineHeight="29px";_5.style.fontSize="14px";_5.onclick=this.clickFn1;_4.getContainer().appendChild(_5);return _5;};(function($){$.fn.extend({pagination:function(_1,_2){if(!_2.totalSize||_2.totalSize==0){return;}_2=$.extend({},$.Pagination.defaults,_2);var _3=Math.ceil(_2.totalSize/_2.pageSize);_2.pages=_3;if(_2.pageIndex<1){_2.pageIndex=1;}if(_2.pageIndex>_2.pages){_2.pageIndex=_2.pages;}if(!_1){_1={};}return this.each(function(){new $.Pagination(this,_1,_2);});},initDisplay:function(){return this.trigger("initDisplay");}});$.Pagination=function(_4,_5,_6){_6.precall();var _7=$(_4);$.Pagination.paint(_7,_5,_6);_7.bind("initDisplay",function(){$.ajax({type:_6.mothed,url:_6.action,data:_5,async:_6.async,success:function(_8){var _9=$.parseJSON(_8);if(_6["callback"]){_6["callback"](_9);}}});_7.empty();$.Pagination.paint(_7,_5,_6);});_6.finishcall();};$.Pagination.defaults={pageIndex:0,pageSize:20,pages:0,totalSize:0,mothed:"post",action:"#",ajax:false,displaySize:4,async:true,href:"javascript:void(0)",precall:function(){},callback:function(_a){alert("Please override the option of a callback function!");},finishcall:function(){}};$.Pagination.paint=function(_b,_c,_d){var _e=_b.attr("id");var _f=_e+(new Date()).getTime();var _10=null;var _11=_d.pageIndex-1>0?_d.pageIndex-1:_d.pageIndex;offset=(_d.pages-_11+1)-_d.displaySize;if(offset<0){_11=_11+offset>0?_11+offset:1;}var _12=_d.pageIndex+3>_d.pages?_d.pages:_d.pageIndex+3;if(parseInt(_12)-parseInt(_11)>=4){_12=parseInt(_11)+3;}if(!_d.ajax){_10=$("<form id=\""+_f+"\" method=\""+_d.mothed+"\" action=\""+_d.action+"\"></form>");for(var _13 in _c){_10.append("<input type=\"hidden\" name=\""+_13+"\" value=\""+_c[_13]+"\">");}_10.append("<input type=\"hidden\" name=\"pageIndex\" value=\""+_d.pageIndex+"\">");_b.append(_10);}else{_10=_b;}_10.append("<a pageindex=\"1\" href=\""+_d.href+"\" class=\"pad\">首页</a>");if(_d.pageIndex==1){_10.append("<span class=\"pad\">上一页</span>");}else{_10.append("<a pageindex=\""+(parseInt(_d.pageIndex)-1)+"\" class=\"normal\" href=\""+_d.href+"\" class=\"pad\">上一页</a>");}for(i=_11;i<=_12;i++){if(i==_d.pageIndex){_10.append("<a pageindex=\""+i+"\" class=\"current\" href=\""+_d.href+"\">"+i+"</a>");}else{_10.append("<a pageindex=\""+i+"\" class=\"normal\" href=\""+_d.href+"\">"+i+"</a>");}}if(_d.pageIndex==_d.pages){_10.append("<span class=\"pad\">下一页</span>");}else{_10.append("<a pageindex=\""+(parseInt(_d.pageIndex)+1)+"\" href=\""+_d.href+"\" class=\"pad\">下一页</a>");}if(!_d.ajax){_b.find("a").click(function(){$("#"+_f).find("input[name='pageIndex']").val($(this).attr("pageindex"));$("#"+_f).submit();return false;});}else{_b.find("a").click(function(){precall();_c=$.extend({},_c,{pageIndex:$(this).attr("pageIndex"),pageSize:_d.pageSize});$.ajax({type:_d.mothed,url:_d.action,data:_c,async:_d.async,success:function(_14){var _15=$.parseJSON(_14);if(_d["callback"]){_d["callback"](_15);}}});_b.empty();_d.pageIndex=_c.pageIndex;$.Pagination.paint(_b,_c,_d);finishcall();});}};})(jQuery);