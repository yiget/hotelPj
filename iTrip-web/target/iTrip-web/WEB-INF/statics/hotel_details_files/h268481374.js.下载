(function($){var defaults={topSpacing:0,bottomSpacing:0,className:'is-sticky',wrapperClassName:'sticky-wrapper'},$window=$(window),$document=$(document),sticked=[],windowHeight=$window.height(),scroller=function(){var scrollTop=$window.scrollTop(),documentHeight=$document.height(),dwh=documentHeight-windowHeight,extra=(scrollTop>dwh)?dwh-scrollTop:0;for(var i=0;i<sticked.length;i++){var s=sticked[i],elementTop=s.stickyWrapper.offset().top,etse=elementTop-s.topSpacing-extra;if(scrollTop<=etse){if(s.currentTop!==null){s.stickyElement.css('position','').css('top','').removeClass(s.className);s.stickyElement.parent().removeClass(s.className);s.currentTop=null;}}
else{var newTop=documentHeight-s.stickyElement.outerHeight()
-s.topSpacing-s.bottomSpacing-scrollTop-extra;if(newTop<0){newTop=newTop+s.topSpacing;}else{newTop=s.topSpacing;}
if(s.currentTop!=newTop){s.stickyElement.css('position','fixed').css('top',newTop).addClass(s.className);s.stickyElement.parent().addClass(s.className);s.currentTop=newTop;}}}},resizer=function(){windowHeight=$window.height();},methods={init:function(options){var o=$.extend(defaults,options);return this.each(function(){var stickyElement=$(this);stickyId=stickyElement.attr('id');wrapper=$('<div></div>').attr('id',stickyId+'-sticky-wrapper').addClass(o.wrapperClassName);stickyElement.wrapAll(wrapper);var stickyWrapper=stickyElement.parent();sticked.push({topSpacing:o.topSpacing,bottomSpacing:o.bottomSpacing,stickyElement:stickyElement,currentTop:null,stickyWrapper:stickyWrapper,className:o.className});});},update:scroller};if(window.addEventListener){window.addEventListener('scroll',scroller,false);window.addEventListener('resize',resizer,false);}else if(window.attachEvent){window.attachEvent('onscroll',scroller);window.attachEvent('onresize',resizer);}
$.fn.sticky=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.sticky');}};$(function(){setTimeout(scroller,0);});})(jQuery);;(function(a){var b=a(window);a.fn.asynchImageLoader=a.fn.jail=function(d){d=a.extend({timeout:10,effect:false,speed:400,selector:null,offset:0,event:"load+scroll",callback:jQuery.noop,callbackAfterEachImage:jQuery.noop,placeholder:false,ignoreHiddenImages:false},d);var c=this;a.jail.initialStack=this;this.data("triggerEl",(d.selector)?a(d.selector):b);if(d.placeholder!==false){c.each(function(){a(this).attr("src",d.placeholder);});}if(/^load/.test(d.event)){a.asynchImageLoader.later.call(this,d);}else{a.asynchImageLoader.onEvent.call(this,d,c);}return this;};a.asynchImageLoader=a.jail={_purgeStack:function(c){var d=0;while(true){if(d===c.length){break;}else{if(c[d].getAttribute("data-href")){d++;}else{c.splice(d,1);}}}},_loadOnEvent:function(g){var f=a(this),d=g.data.options,c=g.data.images;a.asynchImageLoader._loadImageIfVisible(d,f);f.unbind(d.event,a.asynchImageLoader._loadOnEvent);a.asynchImageLoader._purgeStack(c);if(!!d.callback){a.asynchImageLoader._purgeStack(a.jail.initialStack);a.asynchImageLoader._launchCallback(a.jail.initialStack,d);}},_bufferedEventListener:function(g){var c=g.data.images,d=g.data.options,f=c.data("triggerEl");clearTimeout(c.data("poller"));c.data("poller",setTimeout(function(){c.each(function e(){a.asynchImageLoader._loadImageIfVisible(d,this,f);});a.asynchImageLoader._purgeStack(c);if(!!d.callback){a.asynchImageLoader._purgeStack(a.jail.initialStack);a.asynchImageLoader._launchCallback(a.jail.initialStack,d);}},d.timeout));},onEvent:function(d,c){c=c||this;if(d.event==="scroll"||d.selector){var e=c.data("triggerEl");if(c.length>0){e.bind(d.event,{images:c,options:d},a.asynchImageLoader._bufferedEventListener);if(d.event==="scroll"||!d.selector){b.resize({images:c,options:d},a.asynchImageLoader._bufferedEventListener);}return;}else{if(!!e){e.unbind(d.event,a.asynchImageLoader._bufferedEventListener);}}}else{c.bind(d.event,{options:d,images:c},a.asynchImageLoader._loadOnEvent);}},later:function(d){var c=this;if(d.event==="load"){c.each(function(){a.asynchImageLoader._loadImageIfVisible(d,this,c.data("triggerEl"));});}a.asynchImageLoader._purgeStack(c);a.asynchImageLoader._launchCallback(c,d);setTimeout(function(){if(d.event==="load"){c.each(function(){a.asynchImageLoader._loadImage(d,a(this));});}else{c.each(function(){a.asynchImageLoader._loadImageIfVisible(d,this,c.data("triggerEl"));});}a.asynchImageLoader._purgeStack(c);a.asynchImageLoader._launchCallback(c,d);if(d.event==="load+scroll"){d.event="scroll";a.asynchImageLoader.onEvent(d,c);}},d.timeout);},_launchCallback:function(c,d){if(c.length===0&&!a.jail.isCallback){d.callback.call(this,d);a.jail.isCallback=true;}},_loadImageIfVisible:function(e,h,g){var f=a(h),d=(/scroll/i.test(e.event))?g:b,c=true;if(e.ignoreHiddenImages){c=a.jail._isVisibleInOverflownContainer(f,e)&&f.is(":visible");}if(c&&a.asynchImageLoader._isInTheScreen(d,f,e.offset)){a.asynchImageLoader._loadImage(e,f);}},_isInTheScreen:function(j,c,h){var f=j[0]===window,n=(f?{top:0,left:0}:j.offset()),g=n.top+(f?j.scrollTop():0),i=n.left+(f?j.scrollLeft():0),e=i+j.width(),k=g+j.height(),m=c.offset(),l=c.width(),d=c.height();return(g-h)<=(m.top+d)&&(k+h)>=m.top&&(i-h)<=(m.left+l)&&(e+h)>=m.left;},_loadImage:function(c,d){d.hide();d.attr("src",d.attr("data-href"));d.removeAttr("data-href");if(c.effect){if(c.speed){d[c.effect](c.speed);}else{d[c.effect]();}}else{d.show();}c.callbackAfterEachImage.call(this,d,c);},_isVisibleInOverflownContainer:function(e,d){var f=e.parent(),c=true;while(f.get(0).tagName!=="BODY"){if(f.css("overflow")==="hidden"){if(!a.jail._isInTheScreen(f,e,d.offset)){c=false;break;}}if(f.css("visibility")==="hidden"||e.css("visibility")==="hidden"){c=false;break;}f=f.parent();}return c;}};}(jQuery));;var DateUtil=(function(){function format(date,fmt){var o={"M+":date.getMonth()+1,"d+":date.getDate(),"h+":date.getHours(),"m+":date.getMinutes(),"s+":date.getSeconds(),"q+":Math.floor((date.getMonth()+3)/3),"S":date.getMilliseconds()};if(/(y+)/.test(fmt))fmt=fmt.replace(RegExp.$1,(date.getFullYear()+"").substr(4-RegExp.$1.length));for(var k in o)
if(new RegExp("("+k+")").test(fmt))fmt=fmt.replace(RegExp.$1,(RegExp.$1.length==1)?(o[k]):(("00"+o[k]).substr((""+o[k]).length)));return fmt;}
function addDate(strInterval,Number,dtTmp){var dtTmp=dtTmp||new Date();switch(strInterval){case's':return new Date(Date.parse(dtTmp)+(1000*Number));case'n':return new Date(Date.parse(dtTmp)+(60000*Number));case'h':return new Date(Date.parse(dtTmp)+(3600000*Number));case'd':return new Date(Date.parse(dtTmp)+(86400000*Number));case'w':return new Date(Date.parse(dtTmp)+((86400000*7)*Number));case'q':return new Date(dtTmp.getFullYear(),(dtTmp.getMonth())+Number*3,dtTmp.getDate(),dtTmp.getHours(),dtTmp.getMinutes(),dtTmp.getSeconds());case'm':return new Date(dtTmp.getFullYear(),(dtTmp.getMonth())+Number,dtTmp.getDate(),dtTmp.getHours(),dtTmp.getMinutes(),dtTmp.getSeconds());case'y':return new Date((dtTmp.getFullYear()+Number),dtTmp.getMonth(),dtTmp.getDate(),dtTmp.getHours(),dtTmp.getMinutes(),dtTmp.getSeconds());}}
function diffDays(date1,date2){return(date2.getTime()-date1.getTime())/(24*60*60*1000);}
function getDays(dt,start,end){var dt=dt||new Date(),_dates=[];for(var i=start;i<end;i++){_dates.push(addDate('d',i,dt));}
return _dates;}
return{format:format,addDate:addDate,diffDays:diffDays,getDays:getDays}})();Date.prototype.format=function(fmt){return DateUtil.format(this,fmt)};function _datepickerGetStringTrim(objid){var obj=document.getElementById(objid);if(typeof obj!='undefind'&&obj!=null){var val=$j("#"+objid).attr("value");return val.trim();}else{return"";}};(function($j){$j.fn.YododoDatePicker=function(options){var defaults={factor:1,limitFactor:90,endtimeId:'endtime'};if(options){options=$j.extend(defaults,options);}
if(!options.endtimeLimitFactor){options.endtimeLimitFactor=options.limitFactor+15;}
var today=new Date();today=new Date(today.getTime()+1000*60*60*24*options.factor);var todayStr=""+today.getFullYear()+"-"+(today.getMonth()+1)+"-"+today.getDate();var limitDate=new Date(today.getTime()+1000*60*60*24*options.limitFactor);var limitDateStr=""+limitDate.getFullYear()+"-"+(limitDate.getMonth()+1)+"-"+limitDate.getDate();var endMin,endMinStr;if(options.endtimeFactor){endMin=new Date();endMinStr=todayStr;}else{endMin=today;endMinStr=todayStr;}
var endLimitDate=new Date(endMin.getTime()+1000*60*60*24*options.endtimeLimitFactor);var endLimitDateStr=""+endLimitDate.getFullYear()+"-"+(endLimitDate.getMonth()+1)+"-"+endLimitDate.getDate();var startdates=$j(this).datepicker({dateFormat:'yy-mm-dd',monthNames:['一月','二月','三月','四月','五月','六月','七月','八月','九月','十月','十一月','十二月'],dayNamesMin:['日','一','二','三','四','五','六'],minDate:todayStr,maxDate:limitDateStr,showAnim:"",numberOfMonths:2,onSelect:function(selectedDate){var instance=$j(this).data("datepicker");var date=$j.datepicker.parseDate(instance.settings.dateFormat||$j.datepicker._defaults.dateFormat,selectedDate,instance.settings);var minDate=new Date(date.getTime());minDate.setDate(date.getDate()+1);enddates.not(this).datepicker("option","minDate",minDate);var maxDate=new Date(date.getTime());maxDate.setDate(date.getDate()+15);maxDate=endLimitDate.getTime()>maxDate.getTime()?maxDate:endLimitDate;enddates.not(this).datepicker("option","maxDate",maxDate);if(options.autoSetEndDate){var endSelectedDate=new Date(date.getTime());endSelectedDate.setDate(date.getDate()+options.autoSetEndDate);$j("#"+options.endtimeId).val(endSelectedDate.format("yyyy-MM-dd"));}else{window.setTimeout(function(){$j("#"+options.endtimeId).focus();},100);}}});var enddates=$j("#"+options.endtimeId).datepicker({dateFormat:'yy-mm-dd',monthNames:['一月','二月','三月','四月','五月','六月','七月','八月','九月','十月','十一月','十二月'],dayNamesMin:['日','一','二','三','四','五','六'],minDate:endMinStr,maxDate:endLimitDateStr,showAnim:"",numberOfMonths:2});var startdate=$j.datepicker.parseDate('yy-mm-dd',$j(this).val());if(startdate){var minDate=new Date(startdate.getTime());minDate.setDate(startdate.getDate()+1);enddates.datepicker("option","minDate",minDate);var maxDate=new Date(startdate.getTime());maxDate.setDate(startdate.getDate()+15);maxDate=endLimitDate.getTime()>maxDate.getTime()?maxDate:endLimitDate;enddates.datepicker("option","maxDate",maxDate);}};})(jQuery);;(function($){$.cookie=function(a,b,c){var d=false;if("localStorage"in window){try{window.localStorage.setItem("isStorageAvailable","true");d=true;window.localStorage.removeItem("isStorageAvailable","true")}catch(PrivateBrowsingError){}}if(arguments.length>1&&String(b)!=="[object Object]"){c=jQuery.extend({},c);if(c.maxChunkSize==undefined){c.maxChunkSize=3000}if(c.maxNumberOfCookies==undefined){c.maxNumberOfCookies=20}if(c.useLocalStorage==undefined){c.useLocalStorage=true}if(b===null||b===undefined){if(c.useLocalStorage&&d!=false){localStorage.removeItem(a)}for(var i=0;i<c.maxNumberOfCookies;i++){if(i==0){var e=$.chunkedcookie(a)}else{var e=$.chunkedcookie(a+"---"+i)}if(e!=null){$.chunkedcookie(a+"---"+i,null,c)}else{break}}}else{if(c.useLocalStorage&&d!=false){localStorage.setItem(a,b)}else{var f=new RegExp(".{1,"+c.maxChunkSize+"}","g");if(b.match!=undefined){var g=b.match(f);for(var i=0;i<g.length;i++){if(i==0){$.chunkedcookie(a,g[i],c)}else{$.chunkedcookie(a+"---"+i,g[i],c)}}}else{$.chunkedcookie(a,b,c)}}}return(null)}if(c==undefined){var c;if(arguments.length>1&&String(b)==="[object Object]"){c=b}else{c={}}if(c.maxNumberOfCookies==undefined){c.maxNumberOfCookies=20}if(c.useLocalStorage==undefined){c.useLocalStorage=true}}if(d!=false){var b=localStorage.getItem(a);if(b!=undefined&&b!=null){return(b)}}var b="";for(var i=0;i<c.maxNumberOfCookies;i++){if(i==0){var h=$.chunkedcookie(a)}else{var h=$.chunkedcookie(a+"---"+i)}if(h!=null){b+=h}else{if(i==0){return(null)}break}}return(b)};$.chunkedcookie=function(a,b,c){if(arguments.length>1&&String(b)!=="[object Object]"){c=jQuery.extend({},c);if(b===null||b===undefined){c.expires=-1}if(typeof c.expires==='number'){var d=c.expires,t=c.expires=new Date();t.setDate(t.getDate()+d)}b=String(b);return(document.cookie=[encodeURIComponent(a),'=',c.raw?b:encodeURIComponent(b),c.expires?'; expires='+c.expires.toUTCString():'',c.path?'; path='+c.path:'',c.domain?'; domain='+c.domain:'',c.secure?'; secure':''].join(''))}c=b||{};var e,decode=c.raw?function(s){return s}:decodeURIComponent;return(e=new RegExp('(?:^|; )'+encodeURIComponent(a)+'=([^;]*)').exec(document.cookie))?decode(e[1]):null}})(jQuery);